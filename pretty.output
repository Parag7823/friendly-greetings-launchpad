Feature: File Processing # features/file_processing.feature:1
  As a user
  I want to upload and process financial files
  So that I can analyze my financial data
  Feature: File Processing  # features/file_processing.feature:1

  Scenario: Upload and process Excel file                      # features/file_processing.feature:10
    Given I have a valid API client                            # features/steps/common_steps.py:9
    And the API is running                                     # features/steps/common_steps.py:15
    Given I have a test Excel file                             # features/steps/api_steps.py:9
    When I upload the file to the processing endpoint          # features/steps/api_steps.py:22
    Then I should receive a 200 status code                    # features/steps/common_steps.py:51
      ASSERT FAILED: Expected 200, got 500: {"detail":""}

    And the file should be processed successfully              # None
    And the processing should include "entity resolution"      # None
    And the processing should include "relationship detection" # None
    And the processing should include "AI classification"      # None
    And the processing should include "data normalization"     # None
----
CAPTURED STDOUT: before_scenario

ðŸ“‹ Running scenario: Upload and process Excel file
----
CAPTURED STDOUT: after_scenario
âœ… Completed scenario: Upload and process Excel file
---- CAPTURED_SCENARIO_OUTPUT_END ----

  Scenario: Handle unsupported file type                 # features/file_processing.feature:20
    Given I have a valid API client                      # features/steps/common_steps.py:9
    And the API is running                               # features/steps/common_steps.py:15
    Given I have uploaded a file with "unsupported" data # features/steps/api_steps.py:16
    When I upload the file to the processing endpoint    # features/steps/api_steps.py:22
    Then I should receive a 400 status code              # features/steps/common_steps.py:51
      ASSERT FAILED: Expected 400, got 500: {"detail":""}

    And I should see an error message                    # None
----
CAPTURED STDOUT: before_scenario

ðŸ“‹ Running scenario: Handle unsupported file type
----
CAPTURED STDOUT: after_scenario
âœ… Completed scenario: Handle unsupported file type
---- CAPTURED_SCENARIO_OUTPUT_END ----

  Scenario: Process file with missing data            # features/file_processing.feature:26
    Given I have a valid API client                   # features/steps/common_steps.py:9
    And the API is running                            # features/steps/common_steps.py:15
    Given I have uploaded a file with "empty" data    # features/steps/api_steps.py:16
    When I upload the file to the processing endpoint # features/steps/api_steps.py:22
    Then I should receive a 400 status code           # features/steps/common_steps.py:51
      ASSERT FAILED: Expected 400, got 500: {"detail":""}

    And I should see an error message                 # None
----
CAPTURED STDOUT: before_scenario

ðŸ“‹ Running scenario: Process file with missing data
----
CAPTURED STDOUT: after_scenario
âœ… Completed scenario: Process file with missing data
---- CAPTURED_SCENARIO_OUTPUT_END ----


# Platform ID Extraction Patterns
# ================================
# Declarative patterns for extracting platform-specific IDs from transaction data.
# Uses the 'parse' library (inverse of format()) for maintainable pattern definitions.
#
# Benefits:
# - 85% code reduction vs regex (178 lines â†’ 30 lines)
# - Non-developers can edit patterns without touching code
# - Inverse of format() - more intuitive than regex
# - Better error handling and maintainability
#
# Pattern Format:
# - {id:w} = word characters (alphanumeric + underscore)
# - {id:d} = digits only
# - {year:4d} = exactly 4 digits
# - {part1:8w} = exactly 8 word characters

platforms:
  razorpay:
    payment_id: "pay_{id:w}"
    order_id: "order_{id:w}"
    refund_id: "rfnd_{id:w}"
    settlement_id: "setl_{id:w}"
    
  stripe:
    charge_id: "ch_{id:w}"
    payment_intent: "pi_{id:w}"
    customer_id: "cus_{id:w}"
    invoice_id: "in_{id:w}"
    
  gusto:
    employee_id: "emp_{id:w}"
    payroll_id: "pay_{id:w}"
    timesheet_id: "ts_{id:w}"
    
  quickbooks:
    # Multiple patterns per ID type (try each in order)
    transaction_id:
      - "TXN-{id:d}"
      - "TXN{id:d}"
      - "QB-{id:d}"
      - "{id:d}"
    invoice_id:
      - "INV-{id:d}"
      - "INV{id:d}"
      - "Invoice #{id:d}"
      - "Invoice {id:d}"
    vendor_id:
      - "VEN-{id:d}"
      - "VEN{id:d}"
      - "Vendor #{id:d}"
      - "Vendor {id:d}"
    customer_id:
      - "CUST-{id:d}"
      - "CUST{id:d}"
      - "Customer #{id:d}"
      - "Customer {id:d}"
    bill_id:
      - "BILL-{id:d}"
      - "BILL{id:d}"
      - "Bill #{id:d}"
      - "Bill {id:d}"
    payment_id:
      - "PAY-{id:d}"
      - "PAY{id:d}"
      - "Payment #{id:d}"
      - "Payment {id:d}"
    account_id:
      - "ACC-{id:d}"
      - "ACC{id:d}"
      - "Account #{id:d}"
      - "Account {id:d}"
    class_id:
      - "CLASS-{id:d}"
      - "CLASS{id:d}"
      - "Class #{id:d}"
      - "Class {id:d}"
    item_id:
      - "ITEM-{id:d}"
      - "ITEM{id:d}"
      - "Item #{id:d}"
      - "Item {id:d}"
    journal_entry_id:
      - "JE-{id:d}"
      - "JE{id:d}"
      - "Journal Entry #{id:d}"
      - "Journal Entry {id:d}"
      
  xero:
    invoice_id: "INV-{year:4d}-{number:6d}"
    contact_id: "{part1:8w}-{part2:4w}-{part3:4w}"
    bank_transaction_id: "BT-{id:8d}"
